order.ca.prd$date
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
library(knitr)
library(dplyr)
library(pander)
# https://www.researchgate.net/publication/228150296_A_Time-Series_Analysis_of_US_E-Commerce_Sales
customer = read.csv("./customers-2017-11-19.csv")
newCust = customer[,1:5]
product = read.csv("./products-2017-08-06.csv")
orders = read.csv("./orders-2017-11-19-2.csv")
summary(product$Calculated.Price)
barplot(product$Calculated.Price)
barplot(product$Retail.Price)
summary(product$Retail.Price)
str(product$Product.Type)
str(product$Brand)
# barplot(y = table(product$Brand), x = names(table(product$Brand)))
freq = table(product$Brand)
freqT = data.frame(freq)
freqT$Freq
# names[1] = "idx1"
# names = as.factor(names)
#
# freqT$Freq # value
# names      # names
# plot(freqT$Freq, names)
#
# brandTable = data.frame(names = names, freq = freqT$Freq)
# plot(brandTable[1:100,1], y=brandTable[1:100,2], xlim=c(1,100), ylim=c(1, 300))
# plot(brandTable[101:200,1], y=brandTable[101:200,2])
# numPrd <- nrow(product)
# numCust <- nrow(customer)
# numOrd <- nrow(orders)
# df <- data.frame(numPrd, numCust, numOrd)
# colnames(df) <- c("Products", "Customers", "Orders")
# rownames(df) <- c("Total Number of Records")
# kable(df)
# pandoc.table(df)
# finalPrd <- product %>% select(Product.ID, Brand, Calculated.Price)
# kable(summary.data.frame(finalPrd))
# pandoc.table(summary.data.frame(finalPrd))
# finalOrd <- orders %>% select(Order.ID, Order.Status, Order.Date, Order.Total..inc.tax., Customer.ID)
# kable(summary.data.frame(finalOrd))
#
# pandoc.table(summary.data.frame(finalOrd), split.table = Inf)
# finalCust <- customer %>% select(Customer.ID, Addresses)
# kable(summary.data.frame(finalCust))
# pandoc.table(summary.data.frame(finalCust))
abbState = c("AK", "AL", "AR", "AZ", "CA", "CO", "CT", "DC", "DE", "FL", "GA","HI", "IA", "ID", "IL", "IN", "KS", "KY", "LA","MA","MD", "ME","MI", "MN", "MO", "MS",  "MT", "NC", "ND", "NE", "NH", "NJ", "NM","NV", "NY", "OH", "OK", "OR", "PA", "PR", "RI", "SC", "SD", "TN","TX", "UT", "VA", "VT", "WA", "WI", "WV", "WY")
colnames(newCust) <-c("custID", "orders", "state", "zip", "country")
finalCust <- newCust %>% filter(country == "United States") %>%
filter( state %in% abbState & orders >0 ) %>%
count(state) %>% arrange(desc(n))
kable(finalCust)
finalCust <- newCust %>% filter(country == "United States") %>%
filter( state %in% c("CA")) %>% select(custID)
custList.ca = unlist(finalCust)
names(orders)
orders$Product.Details <- gsub("Product ID: ", "", orders$Product.Details)
order.ca <- orders %>% filter (Customer.ID %in% custList.ca)
order.ca$Product.Details
str(order.ca)
s <- strsplit(order.ca$Product.Details,"\\|")
order.ca.prd = data.frame(custID = rep(order.ca$Customer.ID, sapply(s, length)),
date = rep(order.ca$Order.Date, sapply(s, length)),
time = rep(order.ca$Order.Time, sapply(s, length)),
prdID = unlist(s))
order.ca.prd %>% group_by(prdID) %>% count(prdID) %>% arrange(desc(n))
popular.ca = product %>% filter( Product.ID %in% c(11986, 10613, 10668, 10785, 11980, 10786, 10725, 10629, 10676, 14825))
kable(popular.ca$Brand)
order.ca.prd$date
order.ca.prd$date = as.Date(order.ca.prd$date, "%m-%d-%Y")
normOrder <- order.ca.prd %>% mutate(dateAll = paste(date, time, sep=" "))
normOrder$dateAll = as.POSIXct(as.Date(normOrder$dateAll))
normOrder
order.ca.prd$date
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
library(knitr)
library(dplyr)
library(pander)
# https://www.researchgate.net/publication/228150296_A_Time-Series_Analysis_of_US_E-Commerce_Sales
customer = read.csv("./customers-2017-11-19.csv")
newCust = customer[,1:5]
product = read.csv("./products-2017-08-06.csv")
orders = read.csv("./orders-2017-11-19-2.csv")
summary(product$Calculated.Price)
barplot(product$Calculated.Price)
barplot(product$Retail.Price)
summary(product$Retail.Price)
str(product$Product.Type)
str(product$Brand)
# barplot(y = table(product$Brand), x = names(table(product$Brand)))
freq = table(product$Brand)
freqT = data.frame(freq)
freqT$Freq
# names[1] = "idx1"
# names = as.factor(names)
#
# freqT$Freq # value
# names      # names
# plot(freqT$Freq, names)
#
# brandTable = data.frame(names = names, freq = freqT$Freq)
# plot(brandTable[1:100,1], y=brandTable[1:100,2], xlim=c(1,100), ylim=c(1, 300))
# plot(brandTable[101:200,1], y=brandTable[101:200,2])
# numPrd <- nrow(product)
# numCust <- nrow(customer)
# numOrd <- nrow(orders)
# df <- data.frame(numPrd, numCust, numOrd)
# colnames(df) <- c("Products", "Customers", "Orders")
# rownames(df) <- c("Total Number of Records")
# kable(df)
# pandoc.table(df)
# finalPrd <- product %>% select(Product.ID, Brand, Calculated.Price)
# kable(summary.data.frame(finalPrd))
# pandoc.table(summary.data.frame(finalPrd))
# finalOrd <- orders %>% select(Order.ID, Order.Status, Order.Date, Order.Total..inc.tax., Customer.ID)
# kable(summary.data.frame(finalOrd))
#
# pandoc.table(summary.data.frame(finalOrd), split.table = Inf)
# finalCust <- customer %>% select(Customer.ID, Addresses)
# kable(summary.data.frame(finalCust))
# pandoc.table(summary.data.frame(finalCust))
abbState = c("AK", "AL", "AR", "AZ", "CA", "CO", "CT", "DC", "DE", "FL", "GA","HI", "IA", "ID", "IL", "IN", "KS", "KY", "LA","MA","MD", "ME","MI", "MN", "MO", "MS",  "MT", "NC", "ND", "NE", "NH", "NJ", "NM","NV", "NY", "OH", "OK", "OR", "PA", "PR", "RI", "SC", "SD", "TN","TX", "UT", "VA", "VT", "WA", "WI", "WV", "WY")
colnames(newCust) <-c("custID", "orders", "state", "zip", "country")
finalCust <- newCust %>% filter(country == "United States") %>%
filter( state %in% abbState & orders >0 ) %>%
count(state) %>% arrange(desc(n))
kable(finalCust)
finalCust <- newCust %>% filter(country == "United States") %>%
filter( state %in% c("CA")) %>% select(custID)
custList.ca = unlist(finalCust)
names(orders)
orders$Product.Details <- gsub("Product ID: ", "", orders$Product.Details)
order.ca <- orders %>% filter (Customer.ID %in% custList.ca)
order.ca$Product.Details
str(order.ca)
s <- strsplit(order.ca$Product.Details,"\\|")
order.ca.prd = data.frame(custID = rep(order.ca$Customer.ID, sapply(s, length)),
date = rep(order.ca$Order.Date, sapply(s, length)),
time = rep(order.ca$Order.Time, sapply(s, length)),
prdID = unlist(s))
order.ca.prd %>% group_by(prdID) %>% count(prdID) %>% arrange(desc(n))
popular.ca = product %>% filter( Product.ID %in% c(11986, 10613, 10668, 10785, 11980, 10786, 10725, 10629, 10676, 14825))
kable(popular.ca$Brand)
order.ca.prd$date
order.ca.prd$date = gsub("/", "-",order.ca.prd$date)
order.ca.prd$date
order.ca.prd$date = as.Date(order.ca.prd$date, "%m-%d-%Y")
normOrder <- order.ca.prd %>% mutate(dateAll = paste(date, time, sep=" "))
normOrder$dateAll = as.POSIXct(as.Date(normOrder$dateAll))
drawplot <- function(prdID.target){
freq = normOrder   %>% mutate(freq=1)
filtered <- freq %>% group_by(prdID) %>% mutate(cumsum=cumsum(freq)) %>%
arrange(desc(cumsum))
filtered <- filtered %>% filter(prdID == prdID.target) %>% arrange(cumsum)
filtered$dateAll = as.POSIXlt(as.Date(filtered$dateAll))
ts <- xts(filtered$cumsum, order.by=filtered$dateAll)
period <- to.period(ts,period="years")
montly <- to.monthly(ts)
plot(ts, main=paste(prdID.target, "Product"))
}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
library(knitr)
library(dplyr)
library(pander)
# https://www.researchgate.net/publication/228150296_A_Time-Series_Analysis_of_US_E-Commerce_Sales
customer = read.csv("./customers-2017-11-19.csv")
newCust = customer[,1:5]
product = read.csv("./products-2017-08-06.csv")
orders = read.csv("./orders-2017-11-19-2.csv")
summary(product$Calculated.Price)
barplot(product$Calculated.Price)
barplot(product$Retail.Price)
summary(product$Retail.Price)
str(product$Product.Type)
str(product$Brand)
# barplot(y = table(product$Brand), x = names(table(product$Brand)))
freq = table(product$Brand)
freqT = data.frame(freq)
freqT$Freq
# names[1] = "idx1"
# names = as.factor(names)
#
# freqT$Freq # value
# names      # names
# plot(freqT$Freq, names)
#
# brandTable = data.frame(names = names, freq = freqT$Freq)
# plot(brandTable[1:100,1], y=brandTable[1:100,2], xlim=c(1,100), ylim=c(1, 300))
# plot(brandTable[101:200,1], y=brandTable[101:200,2])
# numPrd <- nrow(product)
# numCust <- nrow(customer)
# numOrd <- nrow(orders)
# df <- data.frame(numPrd, numCust, numOrd)
# colnames(df) <- c("Products", "Customers", "Orders")
# rownames(df) <- c("Total Number of Records")
# kable(df)
# pandoc.table(df)
# finalPrd <- product %>% select(Product.ID, Brand, Calculated.Price)
# kable(summary.data.frame(finalPrd))
# pandoc.table(summary.data.frame(finalPrd))
# finalOrd <- orders %>% select(Order.ID, Order.Status, Order.Date, Order.Total..inc.tax., Customer.ID)
# kable(summary.data.frame(finalOrd))
#
# pandoc.table(summary.data.frame(finalOrd), split.table = Inf)
# finalCust <- customer %>% select(Customer.ID, Addresses)
# kable(summary.data.frame(finalCust))
# pandoc.table(summary.data.frame(finalCust))
abbState = c("AK", "AL", "AR", "AZ", "CA", "CO", "CT", "DC", "DE", "FL", "GA","HI", "IA", "ID", "IL", "IN", "KS", "KY", "LA","MA","MD", "ME","MI", "MN", "MO", "MS",  "MT", "NC", "ND", "NE", "NH", "NJ", "NM","NV", "NY", "OH", "OK", "OR", "PA", "PR", "RI", "SC", "SD", "TN","TX", "UT", "VA", "VT", "WA", "WI", "WV", "WY")
colnames(newCust) <-c("custID", "orders", "state", "zip", "country")
finalCust <- newCust %>% filter(country == "United States") %>%
filter( state %in% abbState & orders >0 ) %>%
count(state) %>% arrange(desc(n))
kable(finalCust)
finalCust <- newCust %>% filter(country == "United States") %>%
filter( state %in% c("CA")) %>% select(custID)
custList.ca = unlist(finalCust)
custList.ca
table(custList.ca)
order.ca <- orders %>% filter (Customer.ID %in% custList.ca)
orders$Product.Details <- gsub("Product ID: ", "", orders$Product.Details)
order.ca <- orders %>% filter (Customer.ID %in% custList.ca)
order.ca
table(order.ca$Customer.ID)
order.ca
order.ca %>% group_by(Customer.ID) %>% mutate(count())
order.ca %>% group_by(Customer.ID) %>%
count(Customer.ID) %>% arrange(desc(n))
finalCust
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
library(knitr)
library(dplyr)
library(pander)
# https://www.researchgate.net/publication/228150296_A_Time-Series_Analysis_of_US_E-Commerce_Sales
customer = read.csv("./customers-2017-11-19.csv")
newCust = customer[,1:5]
product = read.csv("./products-2017-08-06.csv")
orders = read.csv("./orders-2017-11-19-2.csv")
summary(product$Calculated.Price)
barplot(product$Calculated.Price)
barplot(product$Retail.Price)
summary(product$Retail.Price)
str(product$Product.Type)
str(product$Brand)
# barplot(y = table(product$Brand), x = names(table(product$Brand)))
freq = table(product$Brand)
freqT = data.frame(freq)
freqT$Freq
# names[1] = "idx1"
# names = as.factor(names)
#
# freqT$Freq # value
# names      # names
# plot(freqT$Freq, names)
#
# brandTable = data.frame(names = names, freq = freqT$Freq)
# plot(brandTable[1:100,1], y=brandTable[1:100,2], xlim=c(1,100), ylim=c(1, 300))
# plot(brandTable[101:200,1], y=brandTable[101:200,2])
# numPrd <- nrow(product)
# numCust <- nrow(customer)
# numOrd <- nrow(orders)
# df <- data.frame(numPrd, numCust, numOrd)
# colnames(df) <- c("Products", "Customers", "Orders")
# rownames(df) <- c("Total Number of Records")
# kable(df)
# pandoc.table(df)
# finalPrd <- product %>% select(Product.ID, Brand, Calculated.Price)
# kable(summary.data.frame(finalPrd))
# pandoc.table(summary.data.frame(finalPrd))
# finalOrd <- orders %>% select(Order.ID, Order.Status, Order.Date, Order.Total..inc.tax., Customer.ID)
# kable(summary.data.frame(finalOrd))
#
# pandoc.table(summary.data.frame(finalOrd), split.table = Inf)
# finalCust <- customer %>% select(Customer.ID, Addresses)
# kable(summary.data.frame(finalCust))
# pandoc.table(summary.data.frame(finalCust))
abbState = c("AK", "AL", "AR", "AZ", "CA", "CO", "CT", "DC", "DE", "FL", "GA","HI", "IA", "ID", "IL", "IN", "KS", "KY", "LA","MA","MD", "ME","MI", "MN", "MO", "MS",  "MT", "NC", "ND", "NE", "NH", "NJ", "NM","NV", "NY", "OH", "OK", "OR", "PA", "PR", "RI", "SC", "SD", "TN","TX", "UT", "VA", "VT", "WA", "WI", "WV", "WY")
colnames(newCust) <-c("custID", "orders", "state", "zip", "country")
finalCust <- newCust %>% filter(country == "United States") %>%
filter( state %in% abbState & orders >0 ) %>%
count(state) %>% arrange(desc(n))
kable(finalCust)
freqCust <- order.ca %>% group_by(Customer.ID) %>%
count(Customer.ID) %>% arrange(desc(n))
freqCust$Customer.ID[1]
targetCust <- freqCust$Customer.ID[1]
newCust
newCust %>% filter(custID == targetCust)
freqCust <- order.ca %>% group_by(Customer.ID) %>%
count(Customer.ID) %>% arrange(desc(n))
freqCust
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
library(knitr)
library(dplyr)
library(pander)
# https://www.researchgate.net/publication/228150296_A_Time-Series_Analysis_of_US_E-Commerce_Sales
install_github("rga", "skardhamar")
library(devtools)
install_github("rga", "skardhamar")
library(rga)
rga.open(instance="ga", where="ga.rga")
src <- ga$getData(
"ga:UA-12011796-1",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
metrics <- "ga:users"
src <- ga$getData(
"ga:UA-12011796-1",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
start_date <- "2017-01-01"
end_date <- "2017-07-20"
metrics <- "ga:users"
sort <- "ga:date"
src <- ga$getData(
"ga:UA-12011796-1",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
src <- ga$getData(
"ga:24319051",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
src$users
length(src$users)
ts(src$users,start=c(2017,1,1),frequency=12)
?ts
ts(src$users,start=c(2017,1,1),frequency=30)
ts(src$users,start=c(2017,1,1),frequency=12)
metrics <- "ga:users, ga:adGroup"
src <- ga$getData(
"ga:24319051",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
metrics <- "ga:users,ga:adClicks"
src <- ga$getData(
"ga:24319051",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
src$adClicks
src$date
data.frame(
src$date,
src$users,
src$adClicks
)
analytics = data.frame(
date = src$date,
users = src$users,
adClicks = src$adClicks
)
analytics
start_date <- "2016-01-01"
end_date <- "2017-07-20"
metrics <- "ga:users,ga:adClicks"
sort <- "ga:date"
src <- ga$getData(
"ga:24319051",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
length(src$users)
analytics = data.frame(
date = src$date,
users = src$users,
adClicks = src$adClicks
)
analytics
plot(analytics$adClicks)
plot(analytics$adClicks, type="p")
plot(analytics$adClicks, type="l")
plot(analytics$adClicks, type="l")
min(analytics$adClicks)
plot(analytics$adClicks, type="l")
start_date <- "2016-01-01"
end_date <- "2017-11-27"
metrics <- "ga:users,ga:adClicks"
sort <- "ga:date"
src <- ga$getData(
"ga:24319051",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
analytics = data.frame(
date = src$date,
users = src$users,
adClicks = src$adClicks
)
analytics
plot(analytics$adClicks, type="l")
metrics <- "ga:users,ga:adClicks,ga:adCost"
sort <- "ga:date"
src <- ga$getData(
"ga:24319051",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
analytics = data.frame(
date = src$date,
users = src$users,
adClicks = src$adClicks,
adCost = src$adCost
)
plot(analytics$adClicks, type="l")
lines(analytics$adCost, col="red")
start_date <- "2014-01-01"
end_date <- "2017-11-27"
metrics <- "ga:users,ga:adClicks,ga:adCost"
sort <- "ga:date"
src <- ga$getData(
"ga:24319051",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
analytics = data.frame(
date = src$date,
users = src$users,
adClicks = src$adClicks,
adCost = src$adCost
)
plot(analytics$adClicks, type="l")
src <- ga$getData(
"ga:24319051",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
analytics = data.frame(
date = src$date,
users = src$users,
adClicks = src$adClicks,
adCost = src$adCost,
goalConversionRateAll =  src$goalConversionRateAll
)
metrics <- "ga:users,ga:adClicks,ga:adCost,ga:goalConversionRateAll"
src <- ga$getData(
"ga:24319051",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
analytics = data.frame(
date = src$date,
users = src$users,
adClicks = src$adClicks,
adCost = src$adCost,
goalConversionRateAll =  src$goalConversionRateAll
)
src
analytics$goalConversionRateAll
plot(analytics$goalConversionRateAll)
tail(analytics$goalConversionRateAll)
metrics <- "ga:users,ga:adClicks,ga:adCost,ga:goalConversionRateAll, ga:userType"
src <- ga$getData(
"ga:24319051",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
metrics <- "ga:users,ga:adClicks,ga:adCost,ga:goalConversionRateAll,ga:userType"
src <- ga$getData(
"ga:24319051",
start.date = start_date,
end.date = end_date,
metrics = metrics,
sort = sort,
batch = TRUE
)
?ga$getData
?getData
